# 第9章：字符串

## 1. 字符串的本质

C 语言没有专门的 String 类型，字符串就==是**以空字符 `\0` 结尾==的字符数组**。

```c
char str1[] = "Hello"; 
// 内存里是：'H', 'e', 'l', 'l', 'o', '\0'
// 占用 6 个字节，而不是 5 个！

char str2[5] = "Hello"; 
// 错误！因为没有空间放 '\0'，打印时会乱码。
```

## 2. 字符串函数 `<string.h>`

- **`strlen(s)`**: 返回字符串长度（不包含 `\0`）。
- **`strcpy(dst, src)`**: 复制字符串。
- **`strcmp(s1, s2)`**: 比较字符串内容。
- **`strcat(dst, src)`**: 拼接字符串。

## 3. 危险的字符串操作

`strcpy` 和 `strcat` 非常危险，因为它们不检查目标数组够不够大。

```c
char buf[5];
strcpy(buf, "HelloWorld"); // 崩溃！写入越界。
```

**嵌入式安全建议**：
尽量使用安全版本（虽然不是标准 C，但许多编译器支持或自己实现）：`strncpy`。或者自己在操作前严格检查长度。

## 4. 字符串常量与指针

```c
char *p = "Hello"; 
// "Hello" 存放在只读数据区（常量区）。
// p[0] = 'h'; // 运行时错误！尝试修改只读内存。
```
若需要修改字符串，必须定义为数组：`char str[] = "Hello";`。
==**分清 `'A'` 和 `"A"`**：==

- `'A'` 是字符（单引号）。
    
- `"A"` 是字符串（双引号），它实际包含两个字节：`'A'` 和 `'\0'`。