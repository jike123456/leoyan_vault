# Linux 软件安装

在Linux世界中，安装软件主要有两大类方法：**使用包管理器**和**从源代码编译安装**。对于绝大多数情况，强烈推荐使用包管理器。

---

## 一、使用包管理器（推荐）

包管理器是Linux发行版提供的用于自动化软件安装、更新、卸载和依赖关系管理的工具。它极大地简化了软件管理过程。不同的Linux发行版系列使用不同的包管理器。

### 1. Debian / Ubuntu 系统 (使用 `apt`)

`apt` (Advanced Package Tool) 是 Debian、Ubuntu 及其衍生发行版（如 Linux Mint）的默认包管理工具。它处理 `.deb` 格式的软件包。

**核心理论**：`apt` 的工作依赖于一个本地的软件包“源”列表（位于 `/etc/apt/sources.list`），其中记录了可以从哪些服务器上获取软件包信息和文件。

**常用命令示例**：

| 命令 | 功能描述 |
| :--- | :--- |
| `sudo apt update` | **更新软件包列表**。在安装任何软件之前，务必先执行此命令，以同步服务器上最新的软件包信息。 |
| `sudo apt install <包名>` | **安装软件**。`apt`会自动解决并安装所有必需的依赖包。 |
| `sudo apt upgrade` | **升级所有已安装的软件**到最新版本。 |
| `sudo apt remove <包名>` | **卸载软件**，但保留其配置文件。 |
| `sudo apt purge <包名>` | **彻底卸载软件**，同时删除其配置文件。 |
| `apt search <关键词>` | **搜索软件包**。根据关键词查找可用的软件包。 |
| `apt show <包名>` | **查看软件包信息**，如版本、大小、依赖关系和描述。 |
| `sudo apt autoremove` | **自动卸载不再需要的依赖包**，用于清理系统。 |

**实际操作示例**：安装 Nginx 网页服务器。
```bash
# 1. 更新软件包列表
sudo apt update

# 2. 搜索确认 nginx 是否可用
apt search nginx

# 3. 安装 nginx
sudo apt install nginx

# 4. 查看 nginx 的状态
systemctl status nginx

# 5. 如果不再需要，可以卸载
# sudo apt remove nginx
```

### 2. CentOS / RHEL / Fedora 系统 (使用 `yum` 或 `dnf`)

`yum` (Yellowdog Updater, Modified) 是 RHEL、CentOS 7 及更早版本的包管理器。在较新的系统（如 CentOS 8+, Fedora 22+）中，`dnf` (Dandified YUM) 已取代 `yum`，但其命令基本兼容。它们处理 `.rpm` 格式的软件包。

**常用命令示例**：

| 命令 | 功能描述 |
| :--- | :--- |
| `sudo yum check-update` | **检查可用的更新**。 |
| `sudo yum install <包名>` | **安装软件**。 |
| `sudo yum update` | **升级所有已安装的软件**。 |
| `sudo yum remove <包名>` | **卸载软件**。 |
| `yum search <关键词>` | **搜索软件包**。 |
| `yum info <包名>` | **查看软件包信息**。 |

**实际操作示例**：安装 Apache httpd 网页服务器。
```bash
# 1. 检查更新
sudo yum check-update

# 2. 安装 httpd
sudo yum install httpd

# 3. 启动并设置开机自启
sudo systemctl start httpd
sudo systemctl enable httpd

# 4. 查看 httpd 状态
sudo systemctl status httpd

# 5. 如果不再需要，可以卸载
# sudo yum remove httpd
```

---

## 二、从源代码编译安装

当包管理器中没有你需要的软件、需要非常新的版本或需要自定义编译选项时，可以采用这种方法。此方法更复杂，管理也更困难。

**核心理论**：C/C++等语言编写的软件源码需要经过“配置 -> 编译 -> 安装”三步曲才能变成可执行程序。

**通用安装步骤**：

1.  **安装编译工具**
    你需要一个完整的编译环境（如 `gcc` 编译器, `make` 工具等）。
    ```bash
    # Debian/Ubuntu
    sudo apt install build-essential

    # CentOS/RHEL
    sudo yum groupinstall "Development Tools"
    ```

2.  **下载并解压源码包**
    通常从软件官网下载 `.tar.gz` 或 `.tar.bz2` 格式的源码包。
    ```bash
    # 下载
    wget https://example.com/software-1.0.tar.gz

    # 解压
    tar -zxvf software-1.0.tar.gz

    # 进入目录
    cd software-1.0
    ```

3.  **配置 (Configure)**
    运行 `./configure` 脚本。它会检查你的系统环境是否满足编译要求，并生成 `Makefile` 文件。
    **重要**：使用 `--prefix` 参数可以指定安装路径，避免污染系统目录。
    ```bash
    # 检查环境，并指定安装到 /usr/local/software 目录
    ./configure --prefix=/usr/local/software
    ```
    如果此步骤提示缺少依赖库（例如 `missing library Xxx-dev`），你需要手动安装它们。

4.  **编译 (Make)**
    使用 `make` 命令执行编译过程。这会花费一些时间，具体取决于软件大小和你的机器性能。
    ```bash
    make
    ```

5.  **安装 (Make Install)**
    编译成功后，使用 `make install` 将程序文件安装到 `--prefix` 指定的路径。
    ```bash
    sudo make install
    ```

**优缺点**：
- **优点**：可以获取最新版本的软件；可以根据需求进行功能定制和优化。
- **缺点**：
    - **依赖地狱**：需要手动解决所有依赖关系，非常繁琐。
    - **管理困难**：包管理器无法跟踪这些软件，因此卸载和升级都变得很困难（除非源码提供 `make uninstall`）。
    - **可能破坏系统**：如果胡乱安装到系统默认路径，可能会覆盖系统文件，导致不稳定。

## 总结

| 特性 | 包管理器 (apt/yum) | 源码编译 |
| :--- | :--- | :--- |
| **易用性** | 非常简单 | 复杂 |
| **依赖处理** | 自动 | 手动 |
| **更新/卸载** | 简单、干净 | 困难 |
| **版本** | 稳定，但可能不是最新 | 最新 |
| **定制性** | 低 | 高 |
| **推荐度** | **高** | 低 (仅限特殊需求) |
