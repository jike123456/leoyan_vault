# 5.3 多路访问链路和协议 (Multiple Access Links and Protocols)

在网络中，有两种类型的链路：**点对点链路**（连接单个发送方和接收方）和**广播链路**（多个发送和接收节点共享同一信道）。在广播链路中，**多路访问问题**就出现了：如果两个或多个节点同时传输数据，它们的信号就会在信道中相互干扰，导致**碰撞（Collision）**，所有传输的数据都会损坏。

多路访问协议的目标就是协调多个节点的传输行为，以解决或避免碰撞问题。

**类比**: 想象一个有很多人的鸡尾酒会。如果所有人都同时说话（碰撞），就没人能听清任何内容。多路访问协议就像是人们在酒会上遵循的社交礼仪，以确保有效的交流。

---

### 1. 信道划分协议 (Channel Partitioning Protocols)

这类协议通过将广播信道的资源（如时间、频率）预先分割成小份，并永久地分配给每个节点，来从根本上避免碰撞。

*   **类比**: 主持人给每个人规定了固定的发言时间（“张三在每分钟的第1-10秒发言，李四在第11-20秒发言...”）。这样绝对不会有人同时说话。

*   **时分多路复用 (Time Division Multiplexing, TDM)**: 将时间划分为**帧**，每个帧再划分为N个**时隙**。每个节点被固定地分配一个时隙。
*   **频分多路复用 (Frequency Division Multiplexing, FDM)**: 将信道的频率带宽划分为N个较小的频段。每个节点被固定地分配一个频段。
*   **码分多址 (Code Division Multiple Access, CDMA)**: 更复杂的技术，它为每个节点分配一个唯一的编码，允许所有节点同时在整个频段上传输，并通过编码来区分不同节点的信号。

*   **优点**: 公平，简单，一旦分配，节点可以以全部带宽进行传输。
*   **缺点**: **资源利用率低**。如果一个节点没有数据要发送，它被分配到的时隙或频段就会被浪费，其他节点也无法使用。

---

### 2. 随机接入协议 (Random Access Protocols)

这类协议不进行预先的资源划分。每个节点独立地决定何时发送数据。它们允许碰撞发生，但提供了一套检测和恢复碰撞的机制。

*   **类比**: 酒会上的礼仪是“想说就说，但如果发现有人跟你同时说，就都停下来，各自等一小会儿再尝试说”。

*   **ALOHA 协议**:
    *   **纯ALOHA**: 最简单的随机接入协议。节点有数据就立刻发送。如果发生碰撞，就等待一个随机的时间再重试。效率非常低。
    *   **时隙ALOHA (Slotted ALOHA)**: 将时间划分为时隙，所有节点只能在时隙的开始处进行传输。这使得碰撞只可能在同一个时隙内发生，效率比纯ALOHA提高了一倍。

*   **载波侦听多路访问 (Carrier Sense Multiple Access, CSMA)**:
    *   **核心思想**: **“先听后说”（Listen before speaking）**。在发送数据之前，先侦听信道是否空闲。如果信道忙，就等待。
    *   **问题**: 即使侦听到信道空闲，仍然可能因为信号传播延迟而发生碰撞。

*   **带碰撞检测的CSMA (CSMA/CD - Collision Detection)**:
    *   **核心思想**: **“边说边听”（Listen while speaking）**。在发送数据的同时，继续侦听信道。
    *   **工作流程**: 如果检测到碰撞（即听到了除自己以外的信号），立即停止发送，并广播一个拥塞信号。然后，执行**二进制指数退避算法**，即等待一个随机的时间再重新尝试。
    *   **应用**: 这是经典**以太网（有线局域网）**使用的协议。

---

### 3. 轮流协议 (Taking-Turns Protocols)

这类协议试图结合信道划分（无碰撞）和随机接入（高利用率）的优点。

*   **类比**: 在一个更正式的会议上，发言权（一个叫“令牌”的虚拟物品）在与会者之间轮流传递，只有拿到发言权的人才能说话。

*   **轮询 (Polling)**:
    *   有一个**主节点**（Master），它轮流“询问”（轮询）其他**从节点**（Slave）是否有数据要发送。
    *   **缺点**: 引入了轮询延迟；主节点成为单点故障。

*   **令牌传递 (Token Passing)**:
    *   一个称为**令牌（Token）**的特殊小帧在网络节点之间以固定的顺序进行传递。
    *   当一个节点收到令牌时，如果它有数据要发送，就可以持有令牌并发送数据帧。发送完毕后，它将令牌传递给下一个节点。
    *   如果节点没有数据要发送，它只需立即将令牌传给下一个节点。
    *   **优点**: 高负载下性能高效且公平。
    *   **缺点**: 协议复杂；任何一个节点的故障都可能导致令牌丢失，使网络瘫痪。
    *   **应用**: 曾用于令牌环网（Token Ring）和FDDI网络。
