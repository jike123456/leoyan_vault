# 8.2 密码学原理

密码学是网络安全的基石，它通过数学方法来提供机密性、完整性和认证等安全服务。现代密码学主要分为两大体系：对称密钥加密和公开密钥加密。

---

### 1. 对称密钥加密 (Symmetric Key Cryptography)

*   **核心思想**: 发送方和接收方**共享同一个秘密密钥**，并使用这个密钥进行加密和解密。
*   **工作流程**:
    1.  **加密**: 发送方使用共享密钥 `K` 和一个加密算法，将明文 `P` 转换为密文 `C`。 `C = Encrypt(K, P)`
    2.  **解密**: 接收方使用**相同的**共享密钥 `K` 和对应的解密算法，将密文 `C` 还原为明文 `P`。 `P = Decrypt(K, C)`
*   **类比**: 就像你和朋友约定用一个只有你们俩知道的密码箱来通信。你用钥匙（**共享密钥**）把信锁进箱子（**加密**），然后把箱子送过去。你的朋友用**同一把钥匙**打开箱子，取出信件（**解密**）。
*   **优点**:
    *   **速度快**: 加密和解密过程计算量小，效率非常高，适合加密大量数据。
*   **缺点**:
    *   **密钥分发问题**: 最大的挑战在于，如何在通信开始前，通过一个不安全的信道，安全地将这个共享密钥告知对方？如果密钥在分发过程中被窃取，那么整个通信就完全暴露了。
*   **常见算法**:
    *   **DES (Data Encryption Standard)**: 较早的标准，密钥长度较短，已被破解。
    *   **3DES (Triple DES)**: DES的加强版，但速度较慢。
    *   **AES (Advanced Encryption Standard)**: 目前最流行、最安全的对称加密标准，被广泛应用于各种安全协议中。

---

### 2. 公开密钥加密 (Public Key Cryptography)

公开密钥加密（也称非对称加密）革命性地解决了对称加密的密钥分发难题。

*   **核心思想**: 每个用户都拥有一对数学上相关的密钥：**公钥 (Public Key)** 和 **私钥 (Private Key)**。
    *   **公钥**: 可以公开发布，任何人都可以获取。
    *   **私钥**: 必须由用户自己严格保密，绝不能泄露。
*   **工作原理**:
    *   用**公钥**加密的数据，**只有**对应的**私钥**才能解密。
    *   用**私钥**加密的数据（这个过程称为**签名**），**只有**对应的**公钥**才能解密（这个过程称为**验证**）。
*   **类比**:
    *   **加密通信（实现机密性）**:
        1.  公钥就像一个“**只进不出的保险箱**”，你可以把这个敞开的保险箱（**公钥**）送给任何人。
        2.  当别人想给你发送机密信件时，他把信放进你的保险箱里，然后“咔嗒”一声锁上。一旦锁上，即使是他自己也打不开了。
        3.  只有持有唯一钥匙（**私钥**）的你，才能打开这个保险箱，读取信件内容。
    *   **数字签名（实现认证和不可否认性）**将在下一节详细介绍。
*   **优点**:
    *   **解决了密钥分发问题**: 无需事先共享秘密密钥，通信双方只需交换公开的公钥即可。
*   **缺点**:
    *   **计算量巨大**: 加密和解密的速度比对称加密慢几个数量级，不适合加密大量数据。
*   **常见算法**:
    *   **RSA**: 目前应用最广泛的公钥加密算法。

---

### 3. 两种体系的结合使用

在实际应用中（如HTTPS的TLS协议），通常将对称加密和公钥加密结合起来，以取长补短：

1.  **建立连接阶段**: 使用**公钥加密**来安全地协商和交换一个**一次性的对称会话密钥**。
    *   客户端用服务器的公钥加密一个随机生成的对称密钥，然后发送给服务器。
    *   服务器用自己的私钥解密，从而双方都获得了这个共享的会话密钥。这个过程是安全的，因为只有服务器能解密。
2.  **数据传输阶段**: 使用这个**对称会话密钥**和高效的**对称加密算法（如AES）**来加密后续传输的所有应用数据。

通过这种方式，既利用了公钥加密解决了密钥分发的难题，又利用了对称加密实现了高效的数据加密，实现了安全与效率的完美结合。
