# 4.3 [I2C]I2C模块的使用方法

## 主要内容
STM32 硬件 I2C 外设的配置与使用。

### 硬件 I2C 简介
*   STM32F103 有 I2C1, I2C2。
*   支持 7 位/10 位寻址，支持 DMA。
*   标准模式 (100kHz) 和快速模式 (400kHz)。

### 配置流程
1.  开启 I2C 和 GPIO 时钟。
2.  配置 GPIO (SCL/SDA: 复用开漏输出)。
3.  配置 I2C (`I2C_Init`):
    *   ClockSpeed: 100000 (100k)
    *   Mode: I2C_Mode_I2C
    *   DutyCycle: I2C_DutyCycle_2 (1:1)
    *   OwnAddress1: 0x00 (主机地址，随意)
    *   Ack: I2C_Ack_Enable
    *   AcknowledgedAddress: I2C_AcknowledgedAddress_7bit
4.  使能 I2C (`I2C_Cmd`).
