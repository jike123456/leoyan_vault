# 7.1 [EXTI]工作原理

## 主要内容
外部中断/事件控制器 (EXTI) 详解。

### EXTI 简介
*   EXTI 可以监测 GPIO 的电平变化 (上升沿、下降沿、双边沿)。
*   触发时产生中断请求或事件响应。

### EXTI 线路
*   STM32 有 20 条 EXTI 线。
*   **EXTI0 ~ EXTI15**：分别对应 GPIO 的 Pin0 ~ Pin15。
*   *注意*：PA0, PB0, PC0 共用 EXTI0 线，因此不能同时开启 PA0 和 PB0 的中断 (需要通过 AFIO 选择)。

### 配置流程
1.  开启 GPIO 和 AFIO 时钟。
2.  配置 GPIO 为输入模式。
3.  **AFIO 选择中断引脚**：`GPIO_EXTILineConfig(GPIO_PortSourceGPIOB, GPIO_PinSource14);`
4.  **配置 EXTI**：
    *   Line: EXTI_Line14
    *   Mode: EXTI_Mode_Interrupt
    *   Trigger: EXTI_Trigger_Falling (下降沿)
    *   Cmd: ENABLE
5.  **配置 NVIC**：使能 EXTI15_10_IRQn 通道，设置优先级。
6.  **编写 ISR**：`EXTI15_10_IRQHandler`。
