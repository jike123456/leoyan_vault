# 3.2 [串口]UART模块的使用方法

## 主要内容
STM32 内部 USART 外设的结构与配置方法。

### STM32 USART 简介
*   STM32F103 有 USART1 (APB2 高速), USART2, USART3 (APB1)。
*   支持同步模式 (SCLK)，但常用异步模式 (UART)。
*   自带波特率发生器，硬件自动处理移位发送和接收。

### 核心寄存器
*   **DR (Data Register)**：数据寄存器 (9位)，包含发送数据寄存器 (TDR) 和接收数据寄存器 (RDR)。
*   **SR (Status Register)**：状态寄存器。
    *   **TXE** (Tx Empty)：发送寄存器空 (可以写入数据)。
    *   **TC** (Tx Complete)：发送完成 (移位结束)。
    *   **RXNE** (Rx Not Empty)：接收寄存器非空 (可以读取数据)。
*   **BRR (Baud Rate Register)**：波特率寄存器，设置分频系数。

### 库函数配置流程
1.  开启 USART 和 GPIO 时钟。
2.  配置 GPIO (TX: 复用推挽; RX: 浮空/上拉输入)。
3.  配置 USART 参数 (`USART_Init`):
    *   BaudRate: 9600
    *   WordLength: 8b
    *   StopBits: 1
    *   Parity: No
    *   Mode: Tx | Rx
4.  使能 USART (`USART_Cmd`)。
