# 3.5 [串口]格式化打印字符串

## 主要内容
移植 `printf` 函数到 STM32 串口，实现类似 C 语言标准库的格式化输出。

### 方法一：重定向 fputc
C 语言的 `printf` 底层调用 `fputc`。我们需要在代码中重写这个函数，将其输出指向串口。

```c
// 需要包含 <stdio.h>
int fputc(int ch, FILE *f) {
    Serial_SendByte(ch); // 调用之前写的发送字节函数
    return ch;
}
```
*注意*：在 Keil 中需要勾选 "Use MicroLIB" 选项，否则程序可能无法运行。

### 方法二：使用 sprintf
如果不使用 MicroLIB，可以使用 `sprintf` 将格式化字符串打印到 buffer 数组，再调用 `Serial_SendString` 发送 buffer。

```c
char String[100];
sprintf(String, "Num=%d\r\n", 666);
Serial_SendString(String);
```
