# 2.1 点亮 LED 二极管

## 1. GPIO 基础知识

### GPIO 的 8 种工作模式
1.  **输入模式**：
    *   `GPIO_Mode_AIN` (模拟输入)：用于 ADC 采集。
    *   `GPIO_Mode_IN_FLOATING` (浮空输入)：电平不确定，易受干扰（串口 RX 用）。
    *   `GPIO_Mode_IPD` (下拉输入)：默认低电平。
    *   `GPIO_Mode_IPU` (上拉输入)：默认高电平（按键常用）。
2.  **输出模式**：
    *   `GPIO_Mode_Out_OD` (开漏输出)：高电平呈高阻态，需外接上拉电阻（I2C 通信用）。
    *   `GPIO_Mode_Out_PP` (推挽输出)：**驱动能力强，LED 驱动常用**（输出高即接 VDD，输出低即接 VSS）。
    *   `GPIO_Mode_AF_OD` (复用开漏)。
    *   `GPIO_Mode_AF_PP` (复用推挽)：片上外设（如串口 TX、SPI MOSI）控制引脚。

## 2. 操作步骤与代码

**任务**：点亮连接在 PA0 引脚的 LED（低电平点亮）。

### 第一步：开启时钟 (RCC)
STM32 的外设默认是关闭时钟的（为了省电）。操作任何外设前，**必须**先开启对应的时钟。

```c
// 开启 GPIOA 的时钟 (GPIO 挂载在 APB2 总线上)
RCC_APB2PeriphClockCmd(RCC_APB2Periph_GPIOA, ENABLE);
```

### 第二步：初始化 GPIO
配置结构体，设置引脚、模式和速度。

```c
GPIO_InitTypeDef GPIO_InitStructure;
GPIO_InitStructure.GPIO_Pin = GPIO_Pin_0;
GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;
GPIO_InitStructure.GPIO_Mode = GPIO_Mode_Out_PP; // 推挽输出
GPIO_Init(GPIOA, &GPIO_InitStructure);
```

### 第三步：控制高低电平
使用标准库函数控制引脚电平。

```c
// 法1：使用专用函数
GPIO_ResetBits(GPIOA, GPIO_Pin_0); // 输出低电平 (LED 亮)
// GPIO_SetBits(GPIOA, GPIO_Pin_0);   // 输出高电平 (LED 灭)

// 法2：使用读写函数 (不常用)
// GPIO_WriteBit(GPIOA, GPIO_Pin_0, Bit_RESET); 
```

## 3. LED 闪烁示例 (main.c)

```c
#include "stm32f10x.h"
#include "Delay.h" // 假设已添加江科大的 Delay 模块

int main(void)
{
    RCC_APB2PeriphClockCmd(RCC_APB2Periph_GPIOA, ENABLE);
    
    GPIO_InitTypeDef GPIO_InitStructure;
    GPIO_InitStructure.GPIO_Pin = GPIO_Pin_0;
    GPIO_InitStructure.GPIO_Mode = GPIO_Mode_Out_PP;
    GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;
    GPIO_Init(GPIOA, &GPIO_InitStructure);
    
    while (1)
    {
        GPIO_ResetBits(GPIOA, GPIO_Pin_0); // 亮
        Delay_ms(500);
        GPIO_SetBits(GPIOA, GPIO_Pin_0);   // 灭
        Delay_ms(500);
    }
}
```