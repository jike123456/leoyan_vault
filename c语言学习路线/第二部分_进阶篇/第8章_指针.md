# 第8章：指针 (Pointer) —— 全书最难，也是最重要的点

## 1. 什么是指针？

指针就是一个**变量**，只不过它存的不是普通的数值（如 100），而是另一个变量的**内存地址**（如 0x20001000）。

- `&`：取地址运算符。`&a` 得到变量 `a` 的地址。
- `*`：解引用运算符。`*p` 访问指针 `p` 所指向的内存地址里的内容。

```c
int a = 10;
int *p = &a; // p 存储了 a 的地址

printf("Address of a: %p\n", p);
printf("Value of a: %d\n", *p); // 通过地址读取 a 的值

*p = 20; // 通过地址修改 a 的值
printf("New value of a: %d\n", a); // a 变成了 20
```

## 2. 指针的应用：交换两个变量的值

回顾第6章的问题，现在我们可以解决它了。

```c
void swap(int *pa, int *pb) {
    int temp = *pa; // 取出 pa 指向的值
    *pa = *pb;      // 把 pb 指向的值赋给 pa 指向的地方
    *pb = temp;
}

int main() {
    int x = 10, y = 20;
    swap(&x, &y); // 传入 x 和 y 的地址
    printf("x=%d, y=%d\n", x, y); // 输出 x=20, y=10
}
```

## 3. 指针与数组

在 C 语言中，数组名在大多数情况下退化为指向数组第一个元素的指针。

```c
int arr[5] = {1, 2, 3, 4, 5};
int *p = arr; // 等价于 int *p = &arr[0];

// 指针运算
printf("%d\n", *(p+1)); // 输出 2。p+1 表示内存地址向后移动 sizeof(int) 个字节
```
![500](assets/第8章_指针/file-20251224101131465.png)
char* addr = &a
printf("addr = 0x%x\n\r",addr)
printf()
## 4. 嵌入式中的指针
AA
在嵌入式开发中，我们经常需要直接访问硬件寄存器。==寄存器本质上就是内存地址==。

```c
// 假设 LED 控制寄存器的地址是 0x40021018
#define LED_REG  (*((volatile unsigned int *)0x40021018))

// 点亮 LED (向该地址写 1)
LED_REG = 1; 
```
这行代码展示了指针的终极威力：直接操控硬件。

```