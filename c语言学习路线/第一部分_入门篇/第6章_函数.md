# 第6章：函数

## 1. 函数的定义与调用

函数是将功能模块化的基础。

```c
// 返回类型 函数名 (参数列表)
int add(int a, int b) {
    return a + b;
}

int main() {
    int sum = add(3, 5); // 调用函数
    return 0;
}
```

## 2. 局部变量 (Local Variable)

在函数内部定义的变量，称为局部变量。
- **作用域**：仅在当前函数的大括号 `{}` 内有效。
- **生存期**：函数被调用时创建，函数结束时销毁。
- **存储位置**：通常存储在**栈 (Stack)** 中。

## 3. 传值 (Pass by Value) —— 新手难点

**C 语言中，函数参数永远是传值的。**
这意味着函数收到的是参数的一份**拷贝**。在函数里修改参数，不会影响外面的变量。

```c
void try_swap(int a, int b) {
    int temp = a;
    a = b;
    b = temp;
    // 在这里 a 和 b 确实交换了，但它们只是 main 中变量的复制品
}

int main() {
    int x = 10, y = 20;
    try_swap(x, y);
    printf("x=%d, y=%d\n", x, y); // 输出仍然是 x=10, y=20
    // 交换失败！
}
```

**如何解决？**
需要使用**指针**（第8章详解），将变量的地址传进去，函数就能修改该地址处的内容。

## 4. 嵌入式中的函数注意事项

- **栈溢出**：嵌入式系统的栈空间很小（可能只有 1KB）。不要在函数里定义巨大的数组（如 `int buffer[1000]`），这会撑爆栈，导致系统复位。
- **递归**：尽量避免使用递归函数，因为递归深度难以预测，容易导致栈溢出。

```
